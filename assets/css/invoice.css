/* ==========================================================================
   Shrish Admin - Invoice Styles (v1.0)
   ========================================================================== */

/* --- Configuration & Variables --- */
:root {
    --invoice-bg: #ffffff;
    --invoice-padding-mobile: 1rem;
    --invoice-padding-desktop: 2.5rem;
    --invoice-width: 840px; /* Slightly wider for better desktop view */
    --border-color: #e5e7eb; /* Light gray */
    --subtle-bg: #f9fafb; /* Very light gray */
    --label-color: #4b5563; /* Gray-600 */
    --context-color: #6b7280; /* Gray-500 */
    --transition-speed: 0.3s;
    --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    --focus-ring-color: rgba(79, 70, 229, 0.3); /* Primary color focus ring */

    /* Ensure these match your common.css */
    /* --primary-color: #4F46E5; */
    /* --success-color: #10B981; */
    /* --text-color: #111827; */
    /* --text-muted: #6B7280; */
}

/* --- Base Styles --- */
body {
    background-color: #f3f4f6; /* Consistent page background */
}

/* --- 1. Generate Invoice Page (generate-invoice.html) --- */

/* Card Styling */
.card {
    background: var(--invoice-bg);
    border-radius: 8px;
    padding: var(--invoice-padding-mobile);
    box-shadow: var(--card-shadow);
    margin-bottom: 2rem;
}

/* Stepper Navigation */
.stepper-container {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-color);
}
.step {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    color: var(--text-muted);
    flex-basis: 60px; /* Smaller base for mobile */
    flex-shrink: 0;
    transition: color var(--transition-speed) ease;
}
.step-icon {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background-color: var(--subtle-bg);
    border: 2px solid var(--border-color);
    color: var(--text-muted);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    transition: all var(--transition-speed) ease;
    position: relative; /* For potential future badges */
}
.step-label {
    margin-top: 0.5rem;
    font-size: 0.75rem; /* Smaller label for mobile */
    font-weight: 500;
}
.step-divider {
    flex-grow: 1;
    height: 2px;
    background-color: var(--border-color);
    margin: 18px 0.5rem 0 0.5rem; /* Adjusted margin */
    transition: background-color var(--transition-speed) ease;
}

/* Active/Done Step Styles */
.step.active .step-icon {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: #fff;
    transform: scale(1.1);
}
.step.active .step-label {
    color: var(--primary-color);
    font-weight: 600;
}
.step.done .step-icon {
    background-color: var(--success-color);
    border-color: var(--success-color);
    color: #fff;
}
.step.done .step-label {
    color: var(--success-color);
}
/* Divider turns green when the step before it is done */
.step.done + .step-divider {
    background-color: var(--success-color);
}

/* Step Content */
.step-content-container {
    overflow: hidden; /* Helps contain animations */
}
.step-content {
    display: none;
    padding: 0.5rem 0;
    /* Animation applied dynamically via JS if needed, or simple CSS */
    animation: fadeIn 0.5s ease-out;
}
.step-content.active {
    display: block;
}
.step-content h2 {
    font-size: 1.3rem; /* Slightly smaller for mobile */
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 0.5rem;
}
.step-content p {
    font-size: 0.95rem;
    color: var(--text-muted);
    margin-bottom: 1.5rem;
    line-height: 1.6;
}

/* Form Grid Layout */
.form-grid {
    display: grid;
    grid-template-columns: 1fr; /* Single column on mobile */
    gap: 1.25rem;
}

/* Form Groups and Labels */
.form-group {
    margin-bottom: 0; /* Let grid gap handle spacing */
}
.form-group label {
    display: block;
    font-weight: 500;
    color: var(--label-color);
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
}
/* Input Fields (Assuming common.css has base styles) */
.form-control { /* Add this class to relevant inputs if not already present */
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 1rem;
    transition: border-color var(--transition-speed), box-shadow var(--transition-speed);
}
.form-control:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px var(--focus-ring-color);
}

/* Calculation Context Styles */
.calc-context {
    font-weight: 400;
    font-size: 0.8rem; /* Smaller for better fit */
    color: var(--context-color);
    display: block;
    margin-top: 4px;
    line-height: 1.4;
}

/* Section Divider Heading */
h4.section-divider {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-color);
    margin-top: 2rem;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--border-color);
}

/* Step 1 Specific Styles */
.step1-actions {
    display: flex;
    flex-direction: column; /* Stack buttons on mobile */
    align-items: stretch; /* Make buttons full width */
    gap: 0.75rem;
    margin-top: 1.5rem;
}
.or-divider {
    text-align: center;
    font-weight: 600;
    color: var(--text-muted);
    margin: 0.5rem 0;
}

/* Step 2 Specific Styles */
.trip-summary-box {
    background-color: var(--subtle-bg);
    border: 1px solid var(--border-color);
    padding: 1rem;
    border-radius: 6px;
    line-height: 1.6;
    margin-bottom: 1.5rem;
}
.trip-summary-box h4 {
    margin-top: 0;
    margin-bottom: 0.75rem;
    color: var(--primary-color);
    font-size: 1rem;
}
.trip-summary-box p {
    margin: 0.25rem 0;
    font-size: 0.9rem;
}

/* Help Text Box */
.help-text {
    margin-top: 1.5rem;
    padding: 1rem;
    background-color: var(--subtle-bg);
    border: 1px solid var(--border-color);
    border-left: 4px solid var(--primary-color);
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    border-radius: 0 4px 4px 0;
    font-size: 0.85rem;
}
.help-text i {
    color: var(--primary-color);
    font-size: 1.1rem;
    margin-top: 0.1rem;
    flex-shrink: 0;
}
.help-text strong {
    display: block;
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 0.25rem;
}

/* Step 4 Specific Styles */
.invoice-summary-preview {
    background: var(--subtle-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1.5rem;
}
.summary-grid {
    display: grid;
    gap: 0.75rem; /* Tighter gap */
}
.summary-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem; /* Smaller padding */
    background: #fff;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    font-size: 0.9rem; /* Smaller font */
}
.summary-item span { color: var(--text-muted); }
.summary-item strong { color: var(--text-color); font-weight: 600; }
.summary-item.total { background-color: var(--primary-color-light, #eef2ff); border-color: var(--primary-color, #4F46E5); }
.summary-item.total span { color: var(--primary-color, #4F46E5); font-weight: 600; }
.summary-item.total strong { color: var(--primary-color, #4F46E5); font-size: 1.1rem; font-weight: 700; }

#generatedLinkContainer {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1rem;
}
#generatedLink {
    flex-grow: 1;
    background-color: #f3f4f6;
    padding: 0.75rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 0.9rem;
}

/* Step Navigation Buttons */
.step-navigation {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
    padding-top: 1rem;
    border-top: 1px solid var(--border-color);
}

/* --- 2. View Invoice Page (view-invoice.html) --- */

.invoice-container {
    width: 100%; /* Full width on mobile */
    max-width: var(--invoice-width); /* Max width constraint */
    margin: 1rem auto;
    padding: var(--invoice-padding-mobile);
    background: var(--invoice-bg);
    box-shadow: var(--card-shadow);
    border-radius: 8px;
}

/* Invoice Header */
.invoice-header {
    display: flex;
    flex-direction: column; /* Stack on mobile */
    align-items: center; /* Center on mobile */
    text-align: center;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--primary-color);
    margin-bottom: 1.5rem;
}
.header-logo img { width: 80px; margin-bottom: 0.5rem; }
.header-title { margin-bottom: 0.5rem; }
.header-title h1 { font-size: 1.8rem; margin: 0; font-weight: 700; color: #111827; }
.header-title p { margin: 0; font-size: 0.9rem; font-style: italic; color: #374151; }
.header-contact { font-size: 0.8rem; line-height: 1.6; color: var(--text-muted); }
.header-contact p { margin: 2px 0; }
.header-contact i { width: 14px; margin-right: 4px; color: var(--primary-color); }

/* Invoice Meta (Bill To / Details) */
.invoice-meta {
    display: flex;
    flex-direction: column; /* Stack on mobile */
    gap: 1.5rem;
    margin-bottom: 2rem;
}
.bill-to h3, .invoice-details h2 { font-size: 1rem; font-weight: 600; color: var(--text-muted); margin: 0 0 0.5rem 0; text-transform: uppercase; letter-spacing: 0.5px; }
.invoice-details h2 { font-size: 1.5rem; color: var(--text-color); text-align: right; }
.bill-to p, .invoice-details p { margin: 0.25rem 0; font-size: 0.95rem; }
.bill-to p { font-weight: 600; color: var(--text-color); }
.invoice-details { text-align: left; } /* Align left on mobile */

/* Invoice Section General */
.invoice-section { margin-bottom: 2rem; }
.invoice-section h3 { font-size: 1.1rem; font-weight: 600; color: var(--primary-color); border-bottom: 1px solid var(--border-color); padding-bottom: 0.5rem; margin: 0 0 1rem 0; }

/* Summary Table */
.summary-table { width: 100%; border-collapse: collapse; }
.summary-table td { padding: 0.5rem 0; font-size: 0.9rem; border-bottom: 1px dashed var(--border-color); }
.summary-table tr:last-child td { border-bottom: none; }
.summary-table td:first-child { font-weight: 600; color: #374151; width: 100px; padding-right: 1rem; }

/* Charges Table */
.charges-table { width: 100%; border-collapse: collapse; margin-top: 1rem; font-size: 0.9rem; }
.charges-table th, .charges-table td { padding: 0.6rem 0.5rem; text-align: left; border-bottom: 1px solid var(--border-color); }
.charges-table th { background-color: var(--subtle-bg); font-weight: 600; color: #374151; }
/* Align Rate and Amount right */
.charges-table th:nth-child(3), .charges-table td:nth-child(3),
.charges-table th:nth-child(4), .charges-table td:nth-child(4) { text-align: right; }
.charges-table tbody tr:last-child td { border-bottom: none; } /* Remove border on last data row */

/* Charges Table Footer (Totals) */
.charges-table tfoot .total-row td { border-bottom: none; font-size: 1.1rem; font-weight: 700; padding-top: 1rem; border-top: 2px solid var(--text-color); }
.charges-table tfoot .total-label { text-align: right; color: #111827; }
.charges-table tfoot .total-amount { color: var(--success-color); text-align: right; }
.amount-in-words { text-align: right; font-weight: 600; font-style: italic; margin-top: 0.5rem; color: #374151; font-size: 0.9rem; }

/* Invoice Footer (Payment & Terms) */
.invoice-footer {
    display: grid;
    grid-template-columns: 1fr; /* Stack on mobile */
    gap: 2rem;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--border-color);
}
.payment-section h3, .terms-section h3 { font-size: 1.1rem; font-weight: 600; color: var(--primary-color); margin: 0 0 1rem 0; }
.payment-section p { margin-bottom: 1.5rem; font-size: 0.95rem; }

.payment-options {
    display: grid;
    grid-template-columns: 1fr; /* Stack options on mobile */
    gap: 1.5rem;
    text-align: center;
}
.pay-option h4 { font-size: 0.9rem; font-weight: 600; margin: 0 0 0.5rem 0; }
.pay-option p { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem; }
.qr-code {
    width: 100%; /* Maintain aspect ratio */
    max-width: 120px;
    height: auto;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    margin: 0 auto 0.5rem auto; /* Center QR */
    display: block;
}
/* Ensure canvas div behaves like image */
#qr-code-canvas { display: flex; justify-content: center; align-items: center; }
#upi-id-input { width: 100%; text-align: center; background-color: #f3f4f6; margin-bottom: 0.5rem; padding: 0.6rem; border: 1px solid var(--border-color); border-radius: 4px; font-size: 0.9rem; }
.pay-option .btn { font-size: 0.9rem; padding: 0.75rem 1rem; }

.terms-section ol { padding-left: 1.25rem; line-height: 1.7; font-size: 0.85rem; color: #374151; margin: 0; }
.terms-section li { margin-bottom: 0.5rem; }
.terms-section a { color: var(--primary-color); text-decoration: none; font-weight: 500; }
.terms-section a:hover { text-decoration: underline; }

/* Final Print Footer */
.invoice-print-footer { text-align: center; margin-top: 2rem; padding-top: 1rem; border-top: 1px solid var(--border-color); font-size: 0.75rem; color: var(--text-muted); }

/* --- Action Bar (Web Only) --- */
.invoice-actions {
    position: sticky; /* Sticky is better than fixed for mobile scrolling */
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 0.75rem var(--invoice-padding-mobile);
    background: rgba(255, 255, 255, 0.95);
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
    text-align: center;
    z-index: 100;
    backdrop-filter: blur(5px);
    display: flex; /* Use flex for button spacing */
    justify-content: center;
    gap: 0.75rem;
}
.invoice-actions .btn { font-size: 0.9rem; }

/* --- 3. Desktop Styles (min-width: 768px) --- */
@media (min-width: 768px) {
    /* Generate Invoice */
    .card { padding: 1.5rem var(--invoice-padding-desktop); }
    .stepper-container { margin-bottom: 2.5rem; padding-bottom: 1.5rem; }
    .step { flex-basis: 80px; }
    .step-icon { width: 40px; height: 40px; font-size: 1rem; }
    .step-label { font-size: 0.85rem; }
    .step-divider { margin: 20px 1rem 0 1rem; }
    .step-content h2 { font-size: 1.5rem; }
    .step-content p { font-size: 1rem; margin-bottom: 2rem; }
    .form-grid { grid-template-columns: repeat(2, 1fr); gap: 1.5rem 2rem; }
    .form-grid .form-group:nth-child(odd):last-child { grid-column: 1 / -1; } /* Full width if odd number */
    .step1-actions { flex-direction: row; align-items: center; }
    .or-divider { margin: 0; }
    h4.section-divider { margin-top: 2.5rem; margin-bottom: 1.5rem; }

    /* View Invoice */
    .invoice-container { margin: 2rem auto; padding: var(--invoice-padding-desktop); }
    .invoice-header { flex-direction: row; align-items: flex-start; text-align: left; padding-bottom: 1.5rem; margin-bottom: 2rem; }
    .header-logo img { width: 100px; margin-bottom: 0; }
    .header-title { text-align: center; margin: 0 auto; } /* Center title between logo/contact */
    .header-title h1 { font-size: 2.2rem; }
    .header-title p { font-size: 1rem; }
    .header-contact { text-align: right; font-size: 0.9rem; }
    .invoice-meta { flex-direction: row; align-items: flex-start; }
    .invoice-details { text-align: right; } /* Align right on desktop */
    .invoice-details h2 { font-size: 2rem; }
    .invoice-details p { font-size: 1rem; }
    .summary-table { width: 60%; } /* Reduce width */
    .summary-table td { font-size: 1rem; }
    .charges-table { font-size: 1rem; }
    .charges-table th, .charges-table td { padding: 0.75rem 1rem; }
    .charges-table tfoot .total-row td { font-size: 1.3rem; }
    .amount-in-words { font-size: 1rem; }
    .invoice-footer { grid-template-columns: 1.5fr 1fr; gap: 3rem; } /* Adjust column ratio */
    .payment-options { grid-template-columns: repeat(3, 1fr); } /* 3 columns on desktop */
    .pay-option h4 { font-size: 1rem; }
    .pay-option p { font-size: 0.85rem; }
    .terms-section ol { font-size: 0.9rem; }
    .invoice-print-footer { font-size: 0.85rem; }
    .invoice-actions { padding: 1rem var(--invoice-padding-desktop); }
}

/* --- 4. Print Styles --- */
@media print {
    body { background-color: var(--invoice-bg) !important; margin: 0; padding: 0; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
    .no-print, .invoice-actions { display: none !important; }
    .page-container { padding: 0 !important; } /* Remove padding around invoice */
    .main-content { margin: 0 !important; padding: 0 !important; } /* Remove padding */
    .invoice-container { width: 100% !important; max-width: 100% !important; margin: 0 !important; padding: 0 !important; box-shadow: none !important; border-radius: 0 !important; border: none !important; }
    .invoice-header { border-color: var(--primary-color) !important; } /* Ensure color prints */
    .invoice-footer, .invoice-section, .charges-table tbody tr, .charges-table thead, .charges-table tfoot { page-break-inside: avoid !important; }
    .charges-table th { background-color: var(--subtle-bg) !important; } /* Ensure background prints */
    .charges-table tfoot .total-row td { border-top: 2px solid var(--text-color) !important; }
    .charges-table tfoot .total-amount { color: var(--success-color) !important; }
    .terms-section a { color: var(--primary-color) !important; text-decoration: none !important; } /* Make links visible */
    /* Use simpler footer for print */
    .invoice-print-footer { display: block !important; }
}

/* --- Animations --- */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}